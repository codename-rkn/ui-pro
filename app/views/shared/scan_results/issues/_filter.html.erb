<%
   pages      = active_filters[:pages]
   states     = active_filters[:states]
   severities = active_filters[:severities]
   type       = active_filters[:type]
%>

<div class="row">
    <div class="col-md-12" id="issue-summary-filter-actions">
        <form class="simple_form" id="scan-results-filter">

            <div class="row">
                <div class="col-md-12">
                    <div class="flex-row d-flex justify-content-center">
                        <% i = 0
                           data[:states].each do |state, count| %>

                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="issue-state-<%= state %>"
                                       name="filter[states][]" value="<%= state %>"
                                       <%= "checked=checked" if states.include?( state ) %>
                                />

                                <label class="form-check-label" for="issue-state-<%= state %>">
                                    <%= h = state.humanize; i == 0 ? h : h.downcase %>
                                    ( <i class="fa fa-<%= issue_state_to_icon state %>"></i>
                                    <%= count %>)
                                </label>
                            </div>
                            <%= ',' if data[:states].size != i + 1 %>
                            <% i += 1 %>
                        <% end %>

                        <div class="ms-3">
                            issues of severities
                        </div>

                        <% i = 0
                           data[:severities].each do |severity, count| %>

                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="issue-severity-<%= severity %>"
                                       name="filter[severities][]" value="<%= severity %>"
                                       <%= "checked=checked" if severities.include?( severity.to_s ) %>
                                />

                                <label class="form-check-label" for="issue-severity-<%= severity %>">
                                    <%= severity.to_s %> (<%= count %>)
                                </label>
                            </div>

                            <%= ',' if data[:states].size != i + 1 %>
                            <% i += 1 %>

                        <% end %>
                        .
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <div class="form-actions btn-group">
                        <button class="btn btn-<%= type == 'include' ? 'primary' : 'default' %>" type="submit"
                                name="filter[type]" value="include">Show</button>

                        <button class="btn btn-<%= type == 'exclude' ? 'primary' : 'default' %>" type="submit"
                                name="filter[type]" value="exclude">Hide</button>
                    </div>
                </div>
            </div>

            <% pages.each do |id| %>
                <input type="hidden" name="filter[pages][]" value="<%= id %>" />
            <% end %>
        </form>
    </div>
</div>
