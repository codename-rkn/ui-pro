<div class="panel-group" role="tablist" aria-multiselectable="true">
    <% components.each do |shortname, info| %>
        <div class="panel-heading profile-<%= input %>"
             id="profile-<%= input %>-<%= shortname %>-container">
            <h4 class="panel-title" data-toggle="collapse"
                role="tab" data-target="#<%= shortname %>">
                <%= info[:name] %> (<code><%= shortname %></code>)
            </h4>

            <input id="profile_<%= input %>_<%= shortname %>"
                   <% if input.to_s != 'checks' %>
                   name="profile[selected_<%=input%>][]"
                   <% else %>
                   name="profile[<%=input%>][]"
                   <% end %>

                   <%='checked' if selected.include? shortname %> type="checkbox"
                   value="<%=shortname%>">

            <div style="height: 0px;" id="<%= shortname %>" class="panel-collapse collapse">
                <div class="panel-body">
                    <div id="<%= shortname %>-description">
                        <%= md info[:description] %>
                    </div>

                    <% if info[:options] %>
                        <hr/>

                        <div class="plugin-options">
                            <%= render partial: '/shared/plugin_options',
                                       locals: {
                                           plugin_info:   info,
                                           plugin_name:   shortname,
                                           configuration: selected[shortname] || {},
                                       } %>
                        </div>

                        <hr/>
                    <%end%>

                    <table class="table table-borderless table-condensed">
                        <tr>
                            <th>Version:</th>
                            <td><%= info[:version] %></td>
                        </tr>

                        <tr>
                            <th>Authors:</th>
                            <td>
                                <ul class="list-unstyled">
                                    <% info[:authors].each do |author| %>
                                        <li><%= author %></li>
                                    <% end %>
                                </ul>
                            </td>
                        </tr>

                        <% if info[:platforms].is_a? Array %>
                            <tr>
                                <th>Supported platforms:</th>
                                <td>
                                    <ul class="list-unstyled">
                                        <% info[:platforms].each do |platform| %>
                                            <li><%= platform_fullname platform %></li>
                                        <% end %>
                                    </ul>
                                </td>
                            </tr>
                        <% end %>
                    </table>

                </div>
            </div>
        </div>
    <%end%>
</div>
