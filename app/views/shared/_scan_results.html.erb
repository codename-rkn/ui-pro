<%
   sections = {}
   ScanResults::SCAN_RESULT_ACTIONS.each do |section|
       section = section.to_s
       sections[section] = params[:action].to_s == section
   end
%>

<div id="scan-results" class="row">
    <div class="col-md-12">
        <ul class="nav nav-tabs">
            <li id="issues-tab" class="<%= 'active' if sections['issues'] %>">
                <%= link_to params.merge( action: 'issues' ).merge filter_params do %>
                    Issues
                <% end %>
            </li>

            <li id="coverage-tab" class="<%= 'active' if sections['coverage'] %>">
                <%= link_to params.merge( action: 'coverage' ).merge filter_params do %>
                    Coverage

                    <span class="badge">
                        <%= @coverage_count %>
                    </span>
                <% end %>
            </li>

            <% if @reviews_count > 0 %>
                <li id="reviews-tab" class="<%= 'active' if sections['reviews'] %>">
                    <%= link_to params.merge( action: 'reviews' ).merge filter_params do %>
                        Reviews

                        <span class="badge">
                            <%= @reviews_count %>
                        </span>
                    <% end %>
                </li>
            <% end %>

            <% if @revision %>
                <li id="monitor-tab" class="<%= 'active' if sections['monitor'] %>">
                    <%= link_to params.merge( action: 'monitor' ).merge filter_params do %>
                        Monitor
                    <% end %>
                </li>
            <% end %>
        </ul>

        <div class="tab-content">
            <% if sections['issues'] %>
                <div class="tab-pane <%= 'active' if sections['issues'] %>" id="issues">
                    <%= render partial: 'shared/scan_results/issues', locals: {
                            data: @issues_summary
                    } %>
                </div>
            <% end %>

            <% if sections['coverage'] %>
                <div class="tab-pane <%= 'active' if sections['coverage'] %>" id="coverage">
                    <%= render partial: 'shared/scan_results/coverage' %>
                </div>
            <% end %>

            <% if @reviews_count > 0 %>
                <% if sections['reviews'] %>
                    <div class="tab-pane <%= 'active' if sections['reviews'] %>" id="reviews">
                        <%= render partial: 'shared/scan_results/reviews' %>
                    </div>
                <% end %>
            <% end %>

            <% if sections['monitor'] %>
                <div class="tab-pane <%= 'active' if sections['monitor'] %>" id="monitor">
                    <%= render partial: 'shared/scan_results/monitor' %>
                </div>
            <% end %>

        </div>
    </div>
</div>
