<% if @health.any? %>
    if ($('#health-application-server-group').length) {
        $("#sidebar").html("<%= j render(partial: 'revisions/sidebar', formats: :html) %>");

        <% x_axis = @health.map { |d| d['runtime'] }.to_json.html_safe %>

        window.performance_snapshots = <%= @health.to_json.html_safe %>;

        <%= render(
                partial: 'revisions/health/charts/gauge/update_browser_job_count_chart',
                formats: :js,
                locals: { revision: @revision }
            )
        %>
        <%= render(
                partial: 'revisions/health/charts/gauge/update_browser_job_failed_count_chart',
                formats: :js,
                locals: { revision: @revision }
            )
        %>
        <%= render(
                partial: 'revisions/health/charts/gauge/update_current_total_average_app_time_chart',
                formats: :js,
                locals: { revision: @revision }
            )
        %>
        <%= render(
                partial: 'revisions/health/charts/gauge/update_download_kbps_chart',
                formats: :js,
                locals: { revision: @revision, health: @health }
            )
        %>
        <%= render(
                partial: 'revisions/health/charts/gauge/update_http_max_concurency_chart',
                formats: :js,
                locals: { revision: @revision }
            )
        %>
        <%= render(
                partial: 'revisions/health/charts/gauge/update_http_request_count_chart',
                formats: :js,
                locals: { revision: @revision }
            )
        %>
        <%= render(
                partial: 'revisions/health/charts/gauge/update_upload_kbps_chart',
                formats: :js,
                locals: { revision: @revision, health: @health }
            )
        %>
        <%= render(
                partial: 'revisions/health/charts/gauge/update_current_http_responses_per_second_chart',
                formats: :js,
                locals: { revision: @revision }
            )
        %>
        <%= render(
                partial: 'revisions/health/charts/gauge/update_current_http_average_response_time_chart',
                formats: :js,
                locals: { revision: @revision }
            )
        %>
        <%= render(
                partial: 'revisions/health/charts/gauge/update_current_http_failed_count_chart',
                formats: :js,
                locals: { revision: @revision }
            )
        %>
    } else {
        <%= render(partial: 'shared/scan_results', formats: :js, locals: { sidebar_partial_path: 'revisions/sidebar' }) %>
    };
<% else %>
    <%= render(partial: 'shared/scan_results', formats: :js, locals: { sidebar_partial_path: 'revisions/sidebar' }) %>
<% end %>
