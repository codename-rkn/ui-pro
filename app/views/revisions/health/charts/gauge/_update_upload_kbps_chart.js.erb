<% value = revision.performance_snapshot.upload_kbps %>
<% label = "#{revision.performance_snapshot.upload_kbps} KBps".to_json.html_safe %>
<% max = health.map { |d| d['upload_kbps'].to_f }.max %>

const uploadKbpsGaugeChart = new window.Charts.gaugeChart(
    'current_upload_kbps',
    {
        name: 'Upload KBps',
        value: <%= value %>,
        label: <%= label %>,
        max: <%= max %>
    }
);

uploadKbpsGaugeChart.initializeChart();

<% if local_assigns[:update] %>
    uploadKbpsGaugeChart.updateDataset({
        value: <%= value %>,
        label: <%= label %>,
        max: <%= max %>
    });
<% end %>
