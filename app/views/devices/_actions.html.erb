<%
   disabled_edit   = nil
   disabled_delete = nil
   if device.scans.any?
       disabled_delete = 'Cannot delete user agent with associated scans.'
       disabled_edit   = 'Cannot edit user agent with associated scans.'
   end
   if device.default?
       disabled_delete = 'Cannot delete default user agent.'
   end
%>

<%= link_to copy_device_path( device ),
            class: 'btn btn-sm btn-primary' do %>
    <i class="fa fa-copy"></i>
<% end %>

<span title="<%= disabled_edit %>" data-bs-toggle="tooltip">
    <%= link_to edit_device_path( device ),
                class: "btn btn-sm btn-warning #{'disabled' if disabled_edit}" do %>
        <i class="fas fa-edit"></i>
    <% end %>
</span>

<span title="<%= disabled_delete %>" data-bs-toggle="tooltip">
    <%= link_to device, class: "btn btn-sm btn-danger #{'disabled' if disabled_delete}",
                data: { turbo_confirm: 'Are you sure?', turbo_method: :delete } do %>
        <i class="fa fa-trash"></i>
    <% end %>
</span>

<div class="btn-group" role="group">
    <button id="device-export-button" type="button"
            class="btn btn-sm btn-inverse dropdown-toggle"
            data-bs-toggle="dropdown">

        <i class="fa fa-download"></i>
    </button>
    <ul class="dropdown-menu" role="menu">
        <li>
            <%= link_to device_path( device, format: :yaml ), class: 'dropdown-item' do %>
                YAML
            <% end %>
        </li>
        <li>
            <%= link_to device_path( device, format: :json ), class: 'dropdown-item' do %>
                JSON
            <% end %>
        </li>
        <li>
            <%= link_to device_path( device, format: :sep ), class: 'dropdown-item' do %>
                SEP (Suitable for the CLI interface.)
            <% end %>
        </li>
    </ul>
</div>
