<%= simple_form_for( [@site, @scan], html: { class: 'form-inline new_scan edit_scan' } ) do |f| %>
    <%= f.error_notification %>

    <div class="row">
        <div class="form-inputs col-md-6">
            <%= f.input :name, placeholder: '(Required) Name', label: false %>
            <%= f.input :description, placeholder: 'Description', label: false %>
        </div>

        <div class="form-inputs col-md-6">
            <%= f.input :path,
                        placeholder: '/',
                        as: :string,
                        disabled: @scan.revisions.any?
            %>

            <%= f.association :site_role,
                              disabled: @scan.revisions.any?,
                              collection: @site.roles.all,
                              selected: @site.roles.guest
            %>

            <%= f.association :profile,
                              disabled: @scan.revisions.any?,
                              collection: current_user.profiles,
                              selected: current_user.profiles.default
            %>

            <%= f.association :user_agent,
                              disabled: @scan.revisions.any?,
                              collection: UserAgent.all,
                              selected: UserAgent.default
            %>
        </div>
    </div>

    <%= f.simple_fields_for :schedule do |sf| %>
    <div class="row">
        <% if !@scan.active? %>
            <div class="col-md-6">
                <h2>Schedule</h2>

                <div class="row">
                    <div class="col-md-9">
                        <%= sf.input :start_at,
                                     include_blank: true,
                                     start_year: Date.today.year,
                                     end_year: Date.today.year + 2,
                                     default: Time.now,
                                     hint: 'The scan will remain unscheduled without a start date-time.'
                        %>
                    </div>

                    <div class="col-md-3">
                        <%= sf.input :stop_after_hours, label: 'Stop after' %> hours
                        <%= sf.input :stop_suspend,
                                     label: 'Suspend instead of aborting',
                                     hint: 'Should the scan be suspended, the' +
                                           ' frequency settings will take place' +
                                           ' after it has been restored.'
                        %>
                    </div>
                </div>
            </div>
        <% end %>

        <div class="col-md-3">
            <h2>Frequency</h2>

            Every
            <%= sf.input :day_frequency,
                              collection: (1..29),
                              as: :select,
                              label: false,
                              placeholder: 'Days (1-29)'
            %>
            days and
            <%= sf.input :month_frequency,
                              collection: (1..12),
                              as: :select,
                              label: false,
                              placeholder: 'Months (1-12)'
            %>
            months, from the
            <%= sf.input :frequency_base,
                         collection: Schedule::FREQUENCY_BASES,
                         as: :select,
                         default: 'start',
                         label: false
            %>
            time.
        </div>
    </div>
    <% end %>

    <div class="row">
        <div class="form-actions col-md-12">
            <%= f.button :submit %>
        </div>
    </div>
<% end %>
