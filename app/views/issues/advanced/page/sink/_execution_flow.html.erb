<table class="table table-condensed table-fixed">
    <colgroup>
        <col width="4%"/>
        <col width="92%"/>
        <col width="6%"/>
    </colgroup>

    <thead>
        <tr>
            <th>#</th>
            <th>
                Helper information
            </th>
            <th></th>
        </tr>
    </thead>
    <% page.dom.execution_flow_sinks.each.with_index do |sink, i| %>
        <tr id="<%= id %>-execution_flow_sinks-<%= i %>" >
            <td>
                <strong>
                    <a href="<%= id_to_location id %>/execution_flow_sinks/<%= i %>">
                        <%= i %>
                    </a>
                </strong>
            </td>
            <td>
                <% if sink.data.any? %>
                    <%= data_dump sink.data %>
                <% else %>
                    <p class="alert alert-info">
                        The JavaScript payload did not log any helper data.
                    </p>
                <% end %>
            </td>
            <td>
                <a href="javascript:void(0);"
                   onclick="$('#<%= id %>-execution_flow_sinks-<%= i %>-inspect').toggle()"
                   class="btn btn-info btn-xs">
                    Inspect
                </a>
            </td>
        </tr>

        <tr id="<%= id %>-execution_flow_sinks-<%= i %>-inspect" class="inspection">
            <td colspan="3">

                <ul class="nav nav-tabs">
                    <li class="active">
                        <a href="<%= id_to_location id %>/execution_flow_sinks/<%= i %>/inspect/stacktrace">
                            Stacktrace
                        </a>
                    </li>
                </ul>

                <div class="tab-content">
                    <div class="tab-pane active" id="<%= id %>-execution_flow_sinks-<%= i %>-inspect-stacktrace">
                        <%= render 'issues/advanced/page/sink/trace/table',
                                id:    "#{id}-execution_flow_sinks-#{i}-inspect-stacktrace",
                                parent_id: id,
                                trace: sink.stackframes,
                                page:  page
                        %>
                    </div>
                </div>
            </td>
        </tr>
    <% end %>
</table>
